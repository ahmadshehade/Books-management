الكيانات (Entities) المطلوبة في المشروع:
User (المستخدم)

Language (اللغة)

Book (الكتاب)

User:
الخاصية | الوصف
id | رقم تعريفي فريد للمستخدم
name | اسم المستخدم
email | بريد المستخدم الإلكتروني
email_verified_at | تاريخ التحقق من البريد الإلكتروني
password | كلمة المرور
remember_token | رمز يُستخدم لتذكر تسجيل الدخول
created_at | تاريخ الإنشاء (افتراضي من Laravel)
updated_at | تاريخ التحديث الأخير (افتراضي من Laravel)

Language:
العمود | الوصف
id | رقم تعريفي فريد لكل لغة (Primary Key).
name | اسم اللغة الكامل، مثل "Arabic" أو "French".
abbreviation | اختصار ISO للغة، مثل "ar" أو "fr". يُستخدم في النظام أو الواجهة.


Books:
الخاصية | الوصف
id | رقم تعريفي فريد للكتاب
title | عنوان الكتاب
slug | نص فريد يُستخدم بالرابط URL
author_name | اسم المؤلف
description | وصف تفصيلي عن الكتاب
price | السعر (بالنقطة العشرية)
cover_image | صورة الغلاف (رابط/اسم ملف)
pdf_copy | نسخة PDF من الكتاب
isbn | رقم التعريف الدولي للكتاب (ISBN)
published_at | تاريخ النشر
stock | الكمية المتوفرة من الكتاب
language_id | رقم اللغة المرتبط بها الكتاب (علاقة foreign key)
pages | عدد صفحات الكتاب
is_valid | حالة الكتاب: صالح للنشر أم لا (true أو false)
created_at | تاريخ الإنشاء
updated_at | تاريخ التحديث الأخير



 من ناحية الموديلات 


User Model – المستخدم
الوصف: يمثل المستخدم في النظام، مثل المشرف أو الشخص الذي يقوم بتسجيل الدخول.

الخصائص القابلة للإسناد الجماعي (fillable):

name: اسم المستخدم.

email: البريد الإلكتروني.

password: كلمة المرور المشفرة.

الخصائص المخفية (hidden):

password: تُخفى عند تحويل النموذج إلى JSON.

remember_token: تُستخدم لتذكر الجلسة ولا تظهر في الإخراج.

التحويلات (casts):

email_verified_at: يُحول تلقائيًا إلى نوع تاريخ.


############################################################################################
Language Model – اللغة
الوصف: يمثل اللغة التي يمكن أن يُكتب بها كتاب، مثل "Arabic" أو "English".

الخصائص القابلة للإسناد الجماعي:

name: الاسم الكامل للغة.

abbreviation: الاختصار الخاص باللغة (مثل: ar، en).

الإعدادات الخاصة:

timestamps: غير مفعّلة (لا يتم حفظ created_at و updated_at).

العلاقات:

books: علاقة (واحد إلى متعدد) تربط اللغة بجميع الكتب المكتوبة بها.
################################################################################################
Book Model – الكتاب
الوصف: يمثل كتابًا متوفرًا في النظام.

الخصائص القابلة للإسناد الجماعي:

title: عنوان الكتاب.

slug: معرف نصي فريد يُستخدم في الروابط.

author_name: اسم المؤلف.

description: وصف تفصيلي لمحتوى الكتاب.

price: السعر بالنقطة العشرية.

cover_image: اسم ملف أو رابط لصورة الغلاف.

pdf_copy: رابط أو اسم ملف نسخة PDF من الكتاب.

isbn: رقم التعريف الدولي للكتاب.

published_at: تاريخ نشر الكتاب.

stock: عدد النسخ المتوفرة.

language_id: المعرف المرتبط بلغة الكتاب.

pages: عدد صفحات الكتاب.

is_valid: حالة الكتاب (صالح للنشر أم لا).

العلاقات:

language: علاقة (متعدد إلى واحد) تربط كل كتاب بلغة واحدة فقط.
#######################################################################################

من ناحيه المصادقه 

UserAuthController


الهدف: هذا الـ Controller مسؤول عن إدارة عمليات تسجيل المستخدم و تسجيل الدخول و تسجيل الخروج في النظام.
يستخدم نموذج User ويتعامل مع الجلسات Session وطلبات الإدخال Request.

register(Request $request)
الهدف: تسجيل مستخدم جديد في النظام.

الخطوات:

التحقق من البيانات (Validation):

email: مطلوب ويجب أن يكون بريدًا إلكترونيًا صحيحًا.

password: مطلوب، مؤكد (confirmed)، بين 6 و16 حرفًا.

name: مطلوب، حروف فقط، بين 3 و20 حرفًا.

في حالة وجود أخطاء: يرجع المستخدم للخلف مع الرسائل.

إنشاء مستخدم: يُنشأ باستخدام User::create بعد تشفير كلمة المرور باستخدام bcrypt.

توجيه المستخدم: يُعاد توجيهه إلى صفحة تسجيل الدخول مع رسالة نجاح.

###########################################################################################

login(Request $request)
الهدف: تسجيل دخول مستخدم موجود.

الخطوات:

التحقق من البيانات:

email: مطلوب وصيغة صحيحة.

password: مطلوب، نصي، بطول لا يقل عن 6.

محاولة تسجيل الدخول: باستخدام auth('web')->attempt.

عند النجاح:

يُعاد توليد الجلسة (للحماية من اختطاف الجلسات).

يُوجه المستخدم إلى صفحة إدارة الكتب.

عند الفشل:

يرجع مع رسالة "المعلومات غير مطابقة".

##############################################################################

logout(Request $request)
الهدف: تسجيل خروج المستخدم من الجلسة.

الخطوات:

تسجيل الخروج: باستخدام auth('web')->logout.

إنهاء الجلسة: invalidate.

توليد Token جديد: regenerateToken للحماية.

إعادة التوجيه: لصفحة تسجيل الدخول مع رسالة نجاح.



يستخدم auth('web') مما يعني أنه يعمل على حارس الجلسات الافتراضي (web guard) في Laravel.

طريقة session()->regenerate() تمنع هجمات اختطاف الجلسات (Session Hijacking).

يتم استخدام withErrors و onlyInput لتمرير الأخطاء وإعادة القيم المُدخلة عند الفشل.

###################################################################################################
 في القسم الخاص باداره الكتب 


ما هو هدف التعديل؟
قمت بتقسيم المسؤوليات داخل BookController بحيث لا يكون مسؤولاً عن تنفيذ العمليات مباشرة، بل يقوم بتفويض المهام إلى كائنات مستقلة (Repositories) تطبق واجهات (Interfaces) مخصصة.
وهذا يعكس تطبيقًا عمليًا لمبدأ SOLID وخاصة مبادئ:

1. BookController
   أصبح عبارة عن وسيط فقط يتعامل مع واجهات BookCreationInterface, BookUpdatingInterface, وغيرها.

لا ينفذ العمليات بنفسه، بل يفوض التنفيذ للـ Repositories.

يستخدم حقن التبعيات (Dependency Injection) داخل __construct.


2. تقسيم الواجهات (Interfaces)
   أنشأت مجموعة من الواجهات الصغيرة المتخصصة، وكل واحدة تمثل عملية واحدة فقط:

الواجهة | الوظيفة
BookCreationInterface | إنشاء كتاب جديد (create, store)
BookUpdatingInterface | تعديل كتاب موجود (edit, update)
BookDeletionInterface | حذف كتاب (destroy)
BookListingInterface | عرض الكتب (index, show)


3. إنشاء مستودعات (Repositories)
   لكل واجهة، أنشأت Repository يقوم بتنفيذ منطق العمل الحقيقي:


المستودع | الوظيفة
BookCreationRepository | إنشاء وحفظ كتاب جديد في قاعدة البيانات، مع رفع الصور وملف PDF
BookUpdatingRepository | تعديل بيانات الكتاب ورفع ملفات جديدة
BookDeletionRepository | حذف الكتاب، وصوره وملفاته من التخزين
BookListingReposotory | عرض الكتب وعرض تفاصيل كتاب معين


كل Repository يطبّق واجهة معينة ويعالج مهمة واحدة فقط.

#######################################################################################
استخدام المعاملات (Transactions)
في store و update:

استخدمت DB::beginTransaction() و DB::commit() و DB::rollBack().

الهدف: ضمان تنفيذ كل العمليات معًا أو إلغاءها بالكامل في حال حدوث خطأ.

بهدف الحفاظ على  تناسق وسلامه DataBase

######################################################################################

استخدام Traits
استخدمت Trait باسم FileTraits لـ:

رفع الصور والـ PDF

حذف الملفات عند التحديث أو الحذف

وهذا يعزز إعادة استخدام الكود وتقليل التكرار (Don't Repeat Yourself - DRY principle).
#############################################################################################

باختصار ما تم تطبيقه من مبادئ SOLID:

المبدأ | كيف تم تطبيقه
S - Single Responsibility | كل Repository مسؤول عن عملية واحدة فقط
O - Open/Closed | يمكن إضافة منطق جديد دون تعديل الكود الحالي
L - Liskov Substitution | كل واجهة يمكن استبدالها بتطبيقاتها دون التأثير على الـ Controller
I - Interface Segregation | قسمّت الوظائف إلى واجهات صغيرة ومحددة
D - Dependency Inversion | BookController يعتمد على الواجهات وليس على تنفيذ معين
#################################################################################################

قمت بانشاء BookRequest

هو كلاس مخصص لفلترة والتحقق من البيانات المدخلة عند إنشاء أو تعديل كتاب
وهذا يُسهل الصيانة، ويجعل الكود أكثر وضوحًا.

يتماشى هذا الملف مع مبدأ Single Responsibility Principle:

كل كلاس مسؤول عن شيء واحد فقط، وهذا الكلاس مسؤول فقط عن التحقق من البيانات المدخلة للكتب.

###################################################################################################

BookServiceProvider
هو مزود خدمات (Service Provider) في Laravel، مسؤول عن ربط الواجهات (Interfaces) مع التطبيقات (Implementations) الخاصة بها (أي: ربط الـ Interface بالمستودع أو الـ Repository).
#######################################################################################################

  هذا هو الكلاس UserFactory الخاص بتوليد بيانات وهمية (dummy data) للمستخدمين في Laravel، وهو مفيد جدًا عند عمل Seeders أو أثناء اختبار النظام (Testing).

الحقل | القيمة | الشرح
name | fake()->name() | اسم عشوائي
email | fake()->unique()->safeEmail() | بريد إلكتروني عشوائي وآمن وفريد
email_verified_at | now() | علامة تحقق البريد (بتاريخ الآن)
password | Hash::make('password') | كلمة المرور الافتراضية لكل المستخدمين الجدد
remember_token | Str::random(10) | رمز لتسجيل الدخول المستمر (Remember Me)


#################################################################################################################

LanguageTableSeeder

الـ Seeder هذا مسؤول عن تعبئة جدول اللغات في قاعدة البيانات. بمعنى آخر، يقوم بإنشاء مجموعة من اللغات مع اختصاراتها الخاصة، مثل "الإنجليزية" مع الاختصار "en"، "العربية" مع الاختصار "ar"، وغيرها من اللغات.

إزالة البيانات القديمة: أولًا، يقوم بتفريغ (حذف) البيانات الموجودة في جدول اللغات. هذه الخطوة تضمن أنه إذا كنت قد أضفت أو عدّلت بيانات سابقًا، سيتم محوها قبل إضافة بيانات جديدة.

إدخال اللغات: بعد ذلك، يقوم بإضافة مجموعة من اللغات إلى الجدول. في هذه الحالة، هناك العديد من اللغات (أكثر من 100 لغة) مع اختصاراتها الخاصة.

إضافة البيانات إلى قاعدة البيانات: في النهاية، يمرّ عبر كل لغة في القائمة ويضيفها إلى قاعدة البيانات.

الهدف الأساسي من هذا الـ Seeder هو تسهيل إضافة بيانات ثابتة إلى قاعدة البيانات (مثل قائمة اللغات). بدلاً من إدخالها يدويًا، يقوم الـ Seeder بهذا العمل بشكل تلقائي.

##############################################################################################################
في الRoute
المستخدمون غير المسجلين يمكنهم الوصول إلى صفحة التسجيل أو تسجيل الدخول فقط.

المستخدمون الذين قاموا بتسجيل الدخول يمكنهم الوصول إلى جميع المسارات المتعلقة بالكتب مثل إضافة وتحديث وحذف الكتب.

بمجرد تسجيل الخروج، سيتم إرجاع المستخدم إلى صفحة تسجيل الدخول.

الميدل وير guest
يتم استخدام الميدل وير guest في بداية الكود لحماية المسارات التي تتعلق بتسجيل الدخول والتسجيل (مثل صفحة التسجيل وتسجيل الدخول).

هذا يعني أن المستخدم إذا كان قد سجل دخوله مسبقًا (أي أن الجلسة تحتوي على بيانات المصادقة للمستخدم)، فلن يتمكن من الوصول إلى صفحة التسجيل أو تسجيل الدخول.

يتم استخدام الميدل وير هنا لضمان أن الأشخاص غير المسجلين فقط هم الذين يمكنهم الوصول إلى صفحات التسجيل وتسجيل الدخول.

المسارات التي تستخدم guest:

صفحة التسجيل: POST إلى /register

صفحة تسجيل الدخول: POST إلى /login

إذا كان المستخدم قد قام بتسجيل الدخول بالفعل، فإن الميدل وير guest يوجهه إلى صفحة أخرى بدلاً من السماح له بالوصول إلى هذه الصفحات.

auth:web
هنا يتم استخدام الميدل وير auth:web على مجموعة من المسارات التي تكون محمية وتحتاج إلى تحقق من أن المستخدم قد قام بتسجيل الدخول.

هذا يعني أن أي طلب إلى المسارات داخل هذا المجموعه سيشترط أن يكون المستخدم قد قام بتسجيل الدخول باستخدام الجلسة (session) أو الـ token الخاص به.

المسارات التي تستخدم auth:web:

صفحة إدارة الكتب: تستخدم BookController لإضافة وتعديل وحذف الكتب.

تسجيل الخروج: POST إلى /logout.

إذا لم يكن المستخدم قد قام بتسجيل الدخول، فسيتم إعادة توجيهه إلى صفحة تسجيل الدخول.

قمت باضافه middleware اخرى من اجل عمليه الredirectifAuthentcation
